<html>
	<head>
		<meta charset="utf-8"/>
		<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
		<meta content="width=device-width, initial-scale=1" name="viewport"/>
		<link href="/images/favicon.ico" rel="shortcut icon"/>
		<link href="/css/style.css" rel="stylesheet"/>
		<link href="http://chris.eidhof.nl//index.xml" rel="alternate" title="RSS" type="application/rss+xml"/>
		<title>
			Chris Eidhof
		</title>
		<meta content="Chris Eidhof" property="og:title"/>
		<meta content="website" property="og:type"/>
	</head>
	<body>
		<section id="content">
			<section id="outer-container">
				<section id="wrapper">
					<header id="header">
						<a href="/" id="title">Chris Eidhof</a>
					</header>
					<b>Please don&apos;t share this, it&apos;s an unpublished note</b>
					<div class="post">
						<hr/>
						<h2>
							title: “Attribute Graph in SwiftUI”
							created: 2025-07-10
						</h2>
						<p>
							Main page: <a href="/note/attribute-graph">Attribute Graph</a>.
						</p>
						<p>
							In this article, I say <em>node</em>
							 but in the Attribute Graph this is typically called an <em>attribute</em>
							.
						</p>
						<p>
							The Attribute Graph in SwiftUI builds up a graph of the SwiftUI views we declare. It creates nodes for the views, the view’s’ inputs and the view’s outputs. The graph is mostly static. While properties change a lot, nodes mostly stay persistent and don’t get recreated all the time.
						</p>
						<ul>
							<li>
								<p>
									For each SwiftUI view, a <code>body</code> node will be part of the graph, containing the entire view body
								</p>
							</li>
							<li>
								<p>
									A <code>State</code> property in a view gets turned into its own node. Every view body that reads the state property creates a (dynamic) dependency on that node.
								</p>
							</li>
						</ul>
						<p>
							Views are compared for equality to see if they are marked as dirty (and need to reevaluate their body). See <a href="/note/swiftui-view-equality">view equality in SwiftUI</a>.
						</p>
						<h2>
							Environment
						</h2>
						<p>
							As the Attribute Graph builds up, SwiftUI keeps track of the current environment node. If a view reads from the environment a dependency is created. If a view modifies the environment, the modified environment points to the previous node, and the subtree will receive the modified environment node. You can see this in <a href="https://youtu.be/dCSf9nR6SOQ?si=_aoisG8CnYkc-Peq&t=579">my presentation</a> at 9:39.
						</p>
						<h2>
							Preferences
						</h2>
						<p>
							I’m not quite sure yet how to implement this, TBD.
						</p>
					</div>
				</section>
			</section>
		</section>
	</body>
</html>